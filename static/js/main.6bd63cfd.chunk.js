(this.webpackJsonpsite=this.webpackJsonpsite||[]).push([[0],{171:function(e,t){},257:function(e,t,n){e.exports=n(384)},262:function(e,t,n){},263:function(e,t){},383:function(e,t,n){},384:function(e,t,n){"use strict";n.r(t);var r=n(3),a=n.n(r),i=n(87),o=n.n(i),c=(n(262),n(174)),s=n(222),u=n(223),l=n(241),E=n(239),d=n(408),h=n(99),f=n.n(h),m=n(128),g=n(409),v=n(413),p=n(17),y=n(410),b=n(176),_=n(139),T=n(403),w=n(224),S=new Map([["centerX",Float64Array.BYTES_PER_ELEMENT],["centerY",Float64Array.BYTES_PER_ELEMENT],["centerZ",Float64Array.BYTES_PER_ELEMENT],["minHeight",Float32Array.BYTES_PER_ELEMENT],["maxHeight",Float32Array.BYTES_PER_ELEMENT],["boundingSphereCenterX",Float64Array.BYTES_PER_ELEMENT],["boundingSphereCenterY",Float64Array.BYTES_PER_ELEMENT],["boundingSphereCenterZ",Float64Array.BYTES_PER_ELEMENT],["boundingSphereRadius",Float64Array.BYTES_PER_ELEMENT],["horizonOcclusionPointX",Float64Array.BYTES_PER_ELEMENT],["horizonOcclusionPointY",Float64Array.BYTES_PER_ELEMENT],["horizonOcclusionPointZ",Float64Array.BYTES_PER_ELEMENT]]);function x(e){return e>>1^-(1&e)}function P(e,t,n,r){var a,i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(a=2===r?new Uint16Array(e,t,n):new Uint32Array(e,t,n),!i)return a;for(var o=0,c=0;c<a.length;++c){var s=a[c];a[c]=o-s,0===s&&++o}return a}function M(e){return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}var R=1,L=2,A=3,I=4,U={maxDecodingStep:I};function z(e,t){var n=Object.assign({},U,t),r=new DataView(e),a=function(e){var t,n=0,r={},a=Object(w.a)(S);try{for(a.s();!(t=a.n()).done;){var i=Object(_.a)(t.value,2),o=i[0],c=i[1],s=8===c?e.getFloat64:e.getFloat32;r[o]=s.call(e,n,!0),n+=c}}catch(u){a.e(u)}finally{a.f()}return{header:r,headerEndPosition:n}}(r),i=a.header,o=a.headerEndPosition;if(n.maxDecodingStep<R)return{header:i};var c=function(e,t){var n=t,r=e.getUint32(n,!0),a=new Uint16Array(3*r);n+=Uint32Array.BYTES_PER_ELEMENT;for(var i=Uint16Array.BYTES_PER_ELEMENT,o=r*i,c=n,s=c+o,u=s+o,l=0,E=0,d=0,h=0;h<r;h++)l+=x(e.getUint16(c+i*h,!0)),E+=x(e.getUint16(s+i*h,!0)),d+=x(e.getUint16(u+i*h,!0)),a[h]=l,a[h+r]=E,a[h+2*r]=d;return{vertexData:a,vertexDataEndPosition:n+=3*o}}(r,o),s=c.vertexData,u=c.vertexDataEndPosition;if(n.maxDecodingStep<L)return{header:i,vertexData:s};var l=function(e,t,n){var r=n,a=t.length/3>65536?Uint32Array.BYTES_PER_ELEMENT:Uint16Array.BYTES_PER_ELEMENT;r%a!==0&&(r+=a-r%a);var i=e.getUint32(r,!0);r+=Uint32Array.BYTES_PER_ELEMENT;var o=3*i,c=P(e.buffer,r,o,a);return{triangleIndicesEndPosition:r+=o*a,triangleIndices:c}}(r,s,u),E=l.triangleIndices,d=l.triangleIndicesEndPosition;if(n.maxDecodingStep<A)return{header:i,vertexData:s,triangleIndices:E};var h=function(e,t,n){var r=n,a=t.length/3>65536?Uint32Array.BYTES_PER_ELEMENT:Uint16Array.BYTES_PER_ELEMENT,i=e.getUint32(r,!0);r+=Uint32Array.BYTES_PER_ELEMENT;var o=P(e.buffer,r,i,a,!1);r+=i*a;var c=e.getUint32(r,!0);r+=Uint32Array.BYTES_PER_ELEMENT;var s=P(e.buffer,r,c,a,!1);r+=c*a;var u=e.getUint32(r,!0);r+=Uint32Array.BYTES_PER_ELEMENT;var l=P(e.buffer,r,u,a,!1);r+=u*a;var E=e.getUint32(r,!0);r+=Uint32Array.BYTES_PER_ELEMENT;var d=P(e.buffer,r,E,a,!1);return{edgeIndicesEndPosition:r+=E*a,westIndices:o,southIndices:s,eastIndices:l,northIndices:d}}(r,s,d),f=h.westIndices,m=h.southIndices,g=h.eastIndices,v=h.northIndices,p=h.edgeIndicesEndPosition;return n.maxDecodingStep<I?{header:i,vertexData:s,triangleIndices:E,westIndices:f,northIndices:v,eastIndices:g,southIndices:m}:{header:i,vertexData:s,triangleIndices:E,westIndices:f,northIndices:v,eastIndices:g,southIndices:m,extensions:function(e,t){var n={};if(e.byteLength<=t)return{extensions:n,extensionsEndPosition:t};for(var r,a=t;a<e.byteLength;){var i=e.getUint8(a,!0);a+=Uint8Array.BYTES_PER_ELEMENT;var o=e.getUint32(a,!0);a+=Uint32Array.BYTES_PER_ELEMENT;var c=new DataView(e.buffer,a,o);switch(i){case 1:n.vertexNormals=(r=c,new Uint8Array(r.buffer,r.byteOffset,r.byteLength));break;case 2:n.waterMask=M(c)}a+=o}return{extensions:n,extensionsEndPosition:a}}(r,p).extensions}}function Y(e,t){if(!e)return null;var n=t.bounds,r=z(e,L),a=r.header,i=r.vertexData,o=r.triangleIndices,c=function(e,t,n){for(var r=t.minHeight,a=t.maxHeight,i=n||[0,0,1,1],o=Object(_.a)(i,4),c=o[0],s=o[1],u=o[2]-c,l=o[3]-s,E=a-r,d=e.length/3,h=new Float32Array(3*d),f=new Float32Array(2*d),m=0;m<d;m++){var g=e[m]/32767,v=e[m+d]/32767,p=e[m+2*d]/32767;h[3*m+0]=g*u+c,h[3*m+1]=v*l+s,h[3*m+2]=p*E+r,f[2*m+0]=g,f[2*m+1]=v}return{POSITION:{value:h,size:3},TEXCOORD_0:{value:f,size:2}}}(i,a,n);return{loaderData:{header:{}},header:{vertexCount:o.length,boundingBox:Object(T.a)(c)},mode:4,indices:{value:o,size:1},attributes:c}}function B(e,t){return Y(e,t["quantized-mesh"])}var N={id:"quantized-mesh",name:"Quantized Mesh",version:"latest",extensions:["terrain"],mimeTypes:["application/vnd.quantized-mesh"],options:{"quantized-mesh":{workerUrl:"https://unpkg.com/@loaders.gl/terrain@".concat("latest","/dist/quantized-mesh-loader.worker.js"),bounds:[0,0,1,1]}}},k=Object(b.a)(Object(b.a)({},N),{},{parseSync:B,parse:function(){var e=Object(m.a)(f.a.mark((function e(t,n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",B(t,n));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}),O=n(16),D=[1];function j(e){return(77067.34/(1<<e)).toFixed(2)}function F(e){var t=e.x,n=e.y,r=e.z,a=e.mosaicUrl,i=void 0===a?"terrarium":a,o=e.meshMaxError,c=new URLSearchParams({url:i,mesh_max_error:void 0===o?10:o});return"https://us-east-1-lambda.kylebarron.dev/dem/mesh/".concat(r,"/").concat(t,"/").concat(n,".terrain?")+c.toString()}function q(e){var t=e||{},n=t.minZoom,r=void 0===n?0:n,a=t.maxZoom,i=void 0===a?15:a,o=t.onViewportLoad,c=t.zRange;return new g.a({id:"quantized-mesh-tile",minZoom:r,maxZoom:i,getTileData:C,renderSubLayers:Z,onViewportLoad:o,zRange:c,refinementStrategy:"no-overlap"})}function C(e){return V.apply(this,arguments)}function V(){return(V=Object(m.a)(f.a.mark((function e(t){var n,r,a,i,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.x,r=t.y,a=t.z,i=j(a),o=F({x:n,y:r,z:a,meshMaxError:i}),e.abrupt("return",Object(y.a)(o,k,{worker:!1}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(e){var t=e.data,n=e.tile;return[new v.a(e,{data:D,mesh:t,getPolygonOffset:null,coordinateSystem:p.a.CARTESIAN,modelMatrix:H(n),getPosition:function(e){return[0,0,0]},getColor:[200,200,200]})]}function H(e){var t=Math.pow(2,e.z),n=512/t,r=-n,a=512*e.x/t,i=512*(1-e.y/t);return(new O.a).translate([a,i,0]).scale([n,r,1])}var X=n(407),W=n(411),J=n(177);function Q(e){return a.a.createElement(X.a,{style:{position:"absolute",width:300,maxWidth:"50%",left:5,top:5,padding:5,maxHeight:"50%",zIndex:1,backgroundColor:"#fff",pointerEvents:"auto",overflowY:"auto",overflow:"visible"}},a.a.createElement(W.a,{as:"h4"},"Serverless Quantized Mesh"),a.a.createElement("p",null,"Uses"," ",a.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/kylebarron/pymartini"},a.a.createElement(J.a,{name:"github"}),a.a.createElement("code",null,"pymartini"))," ","for mesh generation,"," ",a.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/kylebarron/quantized-mesh-encoder"},a.a.createElement(J.a,{name:"github"}),a.a.createElement("code",null,"quantized-mesh-encoder"))," ","for encoding to quantized mesh,"," ",a.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/kylebarron/dem-tiler"},a.a.createElement(J.a,{name:"github"}),a.a.createElement("code",null,"dem-tiler"))," ","for the serverless API, and"," ",a.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://deck.gl"},a.a.createElement("code",null,"deck.gl"))," ","for rendering. You can also easily overlay a texture source, e.g. Mapbox Satellite tiles, with deck.gl."," ",a.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/kylebarron/quantized-mesh-encoder/tree/master/site"},a.a.createElement(J.a,{name:"github"}),"Example source.")))}n(383);var $={latitude:36.07091852096502,longitude:-112.00934837595949,bearing:-35.19642857142857,pitch:60,zoom:13.574472859832357,maxPitch:89},G=function(e){Object(l.a)(n,e);var t=Object(E.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={viewState:$,zRange:null},e.onViewportLoad=function(t){if(t&&0!==t.length&&!t.every((function(e){return!e}))){var n=e.state.zRange,r=t.map((function(e){return e.header.boundingBox.map((function(e){return e[2]}))})),a=Math.min.apply(Math,Object(c.a)(r.map((function(e){return e[0]})))),i=Math.max.apply(Math,Object(c.a)(r.map((function(e){return e[1]}))));(!n||a<n[0]||i>n[1])&&e.setState({zRange:[a,i]})}},e}return Object(u.a)(n,[{key:"render",value:function(){var e=this,t=this.state,n=t.viewState,r=t.zRange,i=[q({onViewportLoad:this.onViewportLoad,zRange:r})];return a.a.createElement("div",null,a.a.createElement(d.a,{viewState:n,layers:i,onViewStateChange:function(t){var n=t.viewState;return e.setState({viewState:n})},controller:{touchRotate:!0}}),a.a.createElement(Q,null))}}]),n}(a.a.Component);document.body.style.margin=0;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(G,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[257,1,2]]]);
//# sourceMappingURL=main.6bd63cfd.chunk.js.map