(this.webpackJsonpsite=this.webpackJsonpsite||[]).push([[0],{186:function(e,t){},290:function(e,t,a){e.exports=a(421)},295:function(e,t,a){},296:function(e,t){},420:function(e,t,a){},421:function(e,t,a){"use strict";a.r(t);var n=a(3),r=a.n(n),o=a(94),i=a.n(o),l=(a(295),a(191)),c=a(244),m=a(245),u=a(272),h=a(269),s=a(445),d=a(183),g=a.n(d),p=a(246),f=a(193),v=a(446),b=a(451),y=a(21),E=a(447),w=a(450),k=a(19),x=[1];function z(e){return(77067.34/(1<<e)).toFixed(2)}function S(e){var t=e.x,a=e.y,n=e.z,r=e.mosaicUrl,o=void 0===r?"terrarium":r,i=e.meshAlgorithm,l=void 0===i?"pydelatin":i,c=e.meshMaxError,m=new URLSearchParams({url:o,mesh_max_error:void 0===c?10:c,mesh_algorithm:l,flip_y:"pydelatin"===l});return"https://us-east-1-lambda.kylebarron.dev/dem/mesh/".concat(n,"/").concat(t,"/").concat(a,".terrain?")+m.toString()}function A(e){var t=e||{},a=t.minZoom,n=void 0===a?0:a,r=t.maxZoom,o=void 0===r?15:r,i=t.onViewportLoad,l=t.zRange,c=t.meshAlgorithm;return new v.a({id:"quantized-mesh-tile",minZoom:n,maxZoom:o,getTileData:function(e){return function(e){return M.apply(this,arguments)}(Object(f.a)(Object(f.a)({},e),{},{meshAlgorithm:c}))},renderSubLayers:O,onViewportLoad:i,zRange:l,refinementStrategy:"no-overlap",updateTriggers:{getTileData:[c]}})}function M(){return(M=Object(p.a)(g.a.mark((function e(t){var a,n,r,o,i,l;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.x,n=t.y,r=t.z,o=t.meshAlgorithm,i=z(r),l=S({x:a,y:n,z:r,meshMaxError:i,meshAlgorithm:o}),e.abrupt("return",Object(E.a)(l,w.a));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(e){var t=e.data,a=e.tile;return[new b.a(e,{data:x,mesh:t,getPolygonOffset:null,coordinateSystem:y.a.CARTESIAN,modelMatrix:_(a),getPosition:function(e){return[0,0,0]},getColor:[200,200,200]})]}function _(e){var t=Math.pow(2,e.z),a=512/t,n=-a,r=512*e.x/t,o=512*(1-e.y/t);return(new k.a).translate([r,o,0]).scale([a,n,1])}var j=a(444),R=a(453),C=a(194),L=a(448),q=[{key:"pydelatin",value:"pydelatin",text:"Algorithm: Delatin"},{key:"pymartini",value:"pymartini",text:"Algorithm: Martini"}];function V(e){var t=e.meshAlgorithm,a=e.onChange;return r.a.createElement(j.a,{style:{position:"absolute",width:300,maxWidth:"50%",left:5,top:5,padding:5,maxHeight:"50%",zIndex:1,backgroundColor:"#fff",pointerEvents:"auto",overflowY:"auto",overflow:"visible"}},r.a.createElement(R.a,{as:"h4"},"Serverless Quantized Mesh"),r.a.createElement("p",null,"Uses"," ",r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/kylebarron/pydelatin"},r.a.createElement(C.a,{name:"github"}),r.a.createElement("code",null,"pydelatin"))," ","or"," ",r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/kylebarron/pymartini"},r.a.createElement(C.a,{name:"github"}),r.a.createElement("code",null,"pymartini"))," ","for mesh generation,"," ",r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/kylebarron/quantized-mesh-encoder"},r.a.createElement(C.a,{name:"github"}),r.a.createElement("code",null,"quantized-mesh-encoder"))," ","for encoding to"," ",r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/CesiumGS/quantized-mesh"},"quantized mesh"),","," ",r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/kylebarron/dem-tiler"},r.a.createElement(C.a,{name:"github"}),r.a.createElement("code",null,"dem-tiler"))," ","for the serverless API, and"," ",r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://deck.gl"},r.a.createElement("code",null,"deck.gl"))," ","for rendering. You can also easily overlay a texture source, e.g. Mapbox Satellite tiles, with deck.gl."," ",r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/kylebarron/quantized-mesh-encoder/tree/master/site"},r.a.createElement(C.a,{name:"github"}),"Example source.")),r.a.createElement(L.a,{placeholder:"Select mesh algorithm",options:q,value:t,onChange:function(e,t){var n=t.value;return a({meshAlgorithm:n})}}))}a(420);var P={latitude:36.07091852096502,longitude:-112.00934837595949,bearing:-35.19642857142857,pitch:60,zoom:13.574472859832357,maxPitch:89},I=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={viewState:P,zRange:null,meshAlgorithm:"pydelatin"},e.onViewportLoad=function(t){if(t&&0!==t.length&&!t.every((function(e){return!e}))){var a=e.state.zRange,n=t.map((function(e){return e.header.boundingBox.map((function(e){return e[2]}))})),r=Math.min.apply(Math,Object(l.a)(n.map((function(e){return e[0]})))),o=Math.max.apply(Math,Object(l.a)(n.map((function(e){return e[1]}))));(!a||r<a[0]||o>a[1])&&e.setState({zRange:[r,o]})}},e}return Object(m.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.viewState,n=t.zRange,o=t.meshAlgorithm,i=[A({onViewportLoad:this.onViewportLoad,zRange:n,meshAlgorithm:o})];return r.a.createElement("div",null,r.a.createElement(s.a,{viewState:a,layers:i,onViewStateChange:function(t){var a=t.viewState;return e.setState({viewState:a})},controller:{touchRotate:!0}}),r.a.createElement(V,{meshAlgorithm:o,onChange:function(t){return e.setState(t)}}))}}]),a}(r.a.Component);document.body.style.margin=0;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(I,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[290,1,2]]]);
//# sourceMappingURL=main.a4180c85.chunk.js.map