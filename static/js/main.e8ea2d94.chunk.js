(this.webpackJsonpsite=this.webpackJsonpsite||[]).push([[0],{200:function(e,t){},201:function(e,t){},294:function(e,t,n){e.exports=n(421)},299:function(e,t,n){},300:function(e,t){},420:function(e,t,n){},421:function(e,t,n){"use strict";n.r(t);var a=n(3),r=n.n(a),o=n(108),i=n.n(o),c=(n(299),n(20)),l=n(2),u=n(1),s=n(250),m=n(14),h=n(447),d=n(94),f=n.n(d),p=n(116),g=n(448),b=n(453),v=n(18),y=n(449),w=n(451),E=n(156),x=[1];function k(e){return(77067.34/(1<<e)).toFixed(2)}function z(e){var t=e.x,n=e.y,a=e.z,r=e.mosaicUrl,o=void 0===r?"terrarium":r,i=e.meshMaxError,c=new URLSearchParams({url:o,mesh_max_error:void 0===i?10:i});return"https://us-east-1-lambda.kylebarron.dev/dem/mesh/".concat(a,"/").concat(t,"/").concat(n,".terrain?")+c.toString()}function S(e){var t=e||{},n=t.minZoom,a=void 0===n?0:n,r=t.maxZoom,o=void 0===r?15:r,i=t.onViewportLoad,c=t.zRange;return new g.a({id:"quantized-mesh-tile",minZoom:a,maxZoom:o,getTileData:M,renderSubLayers:R,onViewportLoad:i,zRange:c,refinementStrategy:"no-overlap"})}function M(e){return O.apply(this,arguments)}function O(){return(O=Object(p.a)(f.a.mark((function e(t){var n,a,r,o,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.x,a=t.y,r=t.z,o=k(r),i=z({x:n,y:a,z:r,meshMaxError:o}),e.abrupt("return",Object(y.a)(i,w.a));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(e){var t=e.data,n=e.tile;return[new b.a(e,{id:"terrain-simple-mesh-layer-".concat(n.x,"-").concat(n.y,"-").concat(n.z),data:x,mesh:t,getPolygonOffset:null,coordinateSystem:v.a.CARTESIAN,modelMatrix:j(n),getPosition:function(e){return[0,0,0]},getColor:[200,200,200]})]}function j(e){var t=Math.pow(2,e.z),n=512/t,a=-n,r=512*e.x/t,o=512*(1-e.y/t);return(new E.a).translate([r,o,0]).scale([n,a,1])}var L=n(446),V=n(450),_=n(205);function q(e){return r.a.createElement(L.a,{style:{position:"absolute",width:300,maxWidth:"50%",left:5,top:5,padding:5,maxHeight:"50%",zIndex:1,backgroundColor:"#fff",pointerEvents:"auto",overflowY:"auto",overflow:"visible"}},r.a.createElement(V.a,{as:"h4"},"Serverless Quantized Mesh"),r.a.createElement("p",null,"Uses"," ",r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/kylebarron/pymartini"},r.a.createElement(_.a,{name:"github"}),r.a.createElement("code",null,"pymartini"))," ","for mesh generation,"," ",r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/kylebarron/quantized-mesh-encoder"},r.a.createElement(_.a,{name:"github"}),r.a.createElement("code",null,"quantized-mesh-encoder"))," ","for encoding to quantized mesh,"," ",r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/kylebarron/dem-tiler"},r.a.createElement(_.a,{name:"github"}),r.a.createElement("code",null,"dem-tiler"))," ","for the serverless API, and"," ",r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://deck.gl"},r.a.createElement("code",null,"deck.gl"))," ","for rendering. You can also easily overlay a texture source, e.g. Mapbox Satellite tiles, with deck.gl."," ",r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/kylebarron/quantized-mesh-encoder/tree/master/site"},r.a.createElement(_.a,{name:"github"}),"Example source.")))}n(420);var C={latitude:36.07091852096502,longitude:-112.00934837595949,bearing:-35.19642857142857,pitch:60,zoom:13.574472859832357,maxPitch:89},P=function(e){Object(m.a)(n,e);var t=Object(s.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={viewState:C,zRange:null},e.onViewportLoad=function(t){if(t&&0!==t.length&&!t.every((function(e){return!e}))){var n=e.state.zRange,a=t.map((function(e){return e.header.boundingBox.map((function(e){return e[2]}))})),r=Math.min.apply(Math,Object(c.a)(a.map((function(e){return e[0]})))),o=Math.max.apply(Math,Object(c.a)(a.map((function(e){return e[1]}))));(!n||r<n[0]||o>n[1])&&e.setState({zRange:[r,o]})}},e}return Object(u.a)(n,[{key:"render",value:function(){var e=this,t=this.state,n=t.viewState,a=t.zRange,o=[S({onViewportLoad:this.onViewportLoad,zRange:a})];return r.a.createElement("div",null,r.a.createElement(h.a,{initialViewState:n,layers:o,onViewStateChange:function(t){return e.setState({viewState:t})},controller:!0}),r.a.createElement(q,null))}}]),n}(r.a.Component);document.body.style.margin=0;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(P,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[294,1,2]]]);
//# sourceMappingURL=main.e8ea2d94.chunk.js.map